{"version":3,"file":"index.js","sources":["../src/js/pixabay-config.js","../src/js/pixabay-api.js","../src/js/refs.js","../src/js/render-functions.js","../src/js/lightbox-api.js","../src/js/pagination.js","../src/js/input-handler.js","../src/main.js"],"sourcesContent":["export const BASE_URL = 'https://pixabay.com/api/';\nexport const API_KEY = '48226781-c314bf294542f2e13595e23de';\nexport const itemsPerPage = 15;\n","import axios from 'axios';\nimport { BASE_URL, API_KEY, itemsPerPage } from './pixabay-config';\n\nexport async function fetchImages(query, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        page,\n        per_page: itemsPerPage,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error('Failed to fetch images');\n  }\n}\n","export const searchForm = document.querySelector('.search-form');\nexport const searchInput = document.querySelector('.search-input');\nexport const loadMoreBtn = document.querySelector('.js-load-more-btn');\nexport const gallery = document.querySelector('.js-gallery');\nexport const input = document.querySelector('.search-input');\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { gallery } from './refs';\n\nexport function showErrorMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n  });\n}\n\nexport function showSuccessMessage(message) {\n  iziToast.success({\n    title: 'Success',\n    message: message,\n  });\n}\n\nexport function renderGallery(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n        <li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n              <p class=\"info-item\">\n                <b>Likes:</b> ${likes}\n              </p>\n              <p class=\"info-item\">\n                <b>Views:</b> ${views}\n              </p>\n              <p class=\"info-item\">\n                <b>Comments:</b> ${comments}\n              </p>\n              <p class=\"info-item\">\n                <b>Downloads:</b> ${downloads}\n              </p>\n            </div>\n          </a>\n        </li>\n      `;\n      }\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function showLoadingIndicator() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.classList.add('show');\n  } else {\n    console.error('Loader not found!');\n  }\n}\n\nexport function hideLoadingIndicator() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.classList.remove('show');\n  } else {\n    console.error('Loader not found!');\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n","import { fetchImages } from './pixabay-api.js';\nimport {\n  renderGallery,\n  showErrorMessage,\n  showLoadingIndicator,\n  hideLoadingIndicator,\n} from './render-functions.js';\n\nimport { lightbox } from './lightbox-api.js';\nimport { itemsPerPage } from './pixabay-config.js';\n\nimport { loadMoreBtn } from './refs.js';\n\nfunction smoothScroll() {\n  const firstGalleryItem = document.querySelector('.gallery-item');\n  if (firstGalleryItem) {\n    const itemHeight = firstGalleryItem.getBoundingClientRect().height;\n    window.scrollBy({\n      top: itemHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n\nexport async function loadImagesForPage(query, page) {\n  showLoadingIndicator();\n\n  try {\n    const { hits: images, totalHits } = await fetchImages(query, page);\n    const totalPages = Math.ceil(totalHits / itemsPerPage);\n\n    renderGallery(images);\n    lightbox.refresh();\n    smoothScroll();\n\n    if (page >= totalPages) {\n      loadMoreBtn.classList.add('is-hidden');\n      return;\n    }\n  } catch (error) {\n    showErrorMessage('Oops, something went wrong. Please try again later.');\n  } finally {\n    hideLoadingIndicator();\n  }\n}\n","export function inputHandler(event) {\n  const input = event.currentTarget;\n\n  if (input.value.trim() !== '') {\n    input.classList.remove('empty');\n    input.classList.add('filled');\n  } else {\n    input.classList.remove('filled');\n    input.classList.add('empty');\n  }\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderGallery,\n  showErrorMessage,\n  showSuccessMessage,\n  showLoadingIndicator,\n  hideLoadingIndicator,\n} from './js/render-functions.js';\nimport { loadImagesForPage } from './js/pagination.js';\nimport { lightbox } from './js/lightbox-api.js';\nimport { inputHandler } from './js/input-handler.js';\nimport {\n  gallery,\n  input,\n  loadMoreBtn,\n  searchForm,\n  searchInput,\n} from './js/refs.js';\n\nlet page = 1;\nlet query = '';\n\nloadMoreBtn.addEventListener('click', event => {\n  page += 1;\n  loadImagesForPage(query, page);\n});\n\nsearchForm.addEventListener('submit', onSearch);\n\nasync function onSearch(event) {\n  event.preventDefault();\n  const form = event.currentTarget;\n  gallery.innerHTML = '';\n  query = searchInput.value.trim();\n  if (query === '') {\n    showErrorMessage('Please enter a search query.');\n    return;\n  }\n\n  localStorage.clear();\n\n  showLoadingIndicator();\n  try {\n    const { hits: images } = await fetchImages(query, page);\n    hideLoadingIndicator();\n\n    if (images.length === 0) {\n      loadMoreBtn.classList.add('is-hidden');\n      showErrorMessage(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    renderGallery(images);\n    showSuccessMessage('Images loaded successfully!');\n    loadMoreBtn.classList.remove('is-hidden');\n    lightbox.refresh();\n  } catch (error) {\n    hideLoadingIndicator();\n    showErrorMessage('Oops, something went wrong. Please try again later.');\n  } finally {\n    form.reset();\n  }\n}\n\n// search-input box-shadow\n\ninput.addEventListener('input', inputHandler);\n"],"names":["BASE_URL","API_KEY","itemsPerPage","fetchImages","query","page","axios","searchForm","searchInput","loadMoreBtn","gallery","input","showErrorMessage","message","iziToast","showSuccessMessage","renderGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showLoadingIndicator","loader","hideLoadingIndicator","lightbox","SimpleLightbox","smoothScroll","firstGalleryItem","itemHeight","loadImagesForPage","totalHits","totalPages","inputHandler","event","onSearch","form"],"mappings":"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"}